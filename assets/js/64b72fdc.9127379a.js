"use strict";(self.webpackChunkdocusaur_gh=self.webpackChunkdocusaur_gh||[]).push([[681],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>g});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),p=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=p(e.components);return o.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,g=c["".concat(u,".").concat(m)]||c[m]||d[m]||r;return n?o.createElement(g,a(a({ref:t},l),{},{components:n})):o.createElement(g,a({ref:t},l))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<r;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5069:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var o=n(7462),i=(n(7294),n(3905));const r={sidebar_position:3,title:"Deploy"},a="Deploy Docusaurus to GitHub Pages",s={unversionedId:"deploy/deploy",id:"deploy/deploy",title:"Deploy",description:"Ensure that docusaurus.config.js is correctly configured as outlined in the Configuration guide.",source:"@site/docs/deploy/deploy.md",sourceDirName:"deploy",slug:"/deploy/",permalink:"/docusaur-gh/deploy/",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Deploy"},sidebar:"docsSidebar",previous:{title:"Configuration",permalink:"/docusaur-gh/config"}},u={},p=[{value:"Configure Actions Permissions",id:"configure-actions-permissions",level:2},{value:"GitHub Actions Workflow",id:"github-actions-workflow",level:2},{value:"Docusaurus in Root",id:"docusaurus-in-root",level:3},{value:"Docusaurus in Monorepo",id:"docusaurus-in-monorepo",level:3},{value:"Configure GitHub Pages",id:"configure-github-pages",level:2}],l={toc:p},c="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,o.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"deploy-docusaurus-to-github-pages"},"Deploy Docusaurus to GitHub Pages"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Ensure that ",(0,i.kt)("a",{parentName:"p",href:"../docusaurus.config.js"},"docusaurus.config.js")," is correctly configured as outlined in the ",(0,i.kt)("a",{parentName:"p",href:"./config#configure"},"Configuration")," guide.")),(0,i.kt)("h2",{id:"configure-actions-permissions"},"Configure Actions Permissions"),(0,i.kt)("p",null,"In the corresponding GitHub repository, the ",(0,i.kt)("inlineCode",{parentName:"p"},"github-actions[bot]")," user will need the appropriate ",(0,i.kt)("strong",{parentName:"p"},"Actions")," permissions. "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to ",(0,i.kt)("inlineCode",{parentName:"p"},"https://github.com/<org-or-user>/<repo>/settings/actions"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In the ",(0,i.kt)("strong",{parentName:"p"},"Workflow permissions")," section, check ",(0,i.kt)("em",{parentName:"p"},"Read and write permissions")," and click ",(0,i.kt)("strong",{parentName:"p"},"Save"),":"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"actions-permissions",src:n(3807).Z,width:"790",height:"319"})))),(0,i.kt)("h2",{id:"github-actions-workflow"},"GitHub Actions Workflow"),(0,i.kt)("p",null,"Create one of the following GitHub Actions workflows in ",(0,i.kt)("inlineCode",{parentName:"p"},".github/workflows")," based on your setup:"),(0,i.kt)("h3",{id:"docusaurus-in-root"},"Docusaurus in Root"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title=".github/workflows/deploy-docs.yml"',title:'".github/workflows/deploy-docs.yml"'},"name: Deploy Docusaurus to GitHub Pages\n\non:\n  push:\n    paths-ignore:\n      - 'README.md'\n    branches:\n      - main\n\njobs:\n  deploy:\n    name: Build Docusaurus to gh-pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 18\n          cache: npm\n\n      - name: Install dependencies\n        run: npm ci\n      - name: Build website\n        run: npm run build\n\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: build\n          user_name: github-actions[bot]\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\n")),(0,i.kt)("h3",{id:"docusaurus-in-monorepo"},"Docusaurus in Monorepo"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The following example assumes that ",(0,i.kt)("inlineCode",{parentName:"p"},"docs")," folder at the repository root contains the Docusaurus root. Of note, even with ",(0,i.kt)("inlineCode",{parentName:"p"},"defaults.run.working-directory: docs")," specified, you still need to explicitly set:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cache-dependency-path")," in ",(0,i.kt)("em",{parentName:"li"},"actions/setup-node@v3")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"publish_dir: docs/build")," in ",(0,i.kt)("em",{parentName:"li"},"Deploy to GitHub Pages")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title=".github/workflows/deploy-docs.yml"',title:'".github/workflows/deploy-docs.yml"'},"name: Deploy Docusaurus to GitHub Pages\n\non:\n  push:\n    paths-ignore:\n      - 'README.md'\n    branches:\n      - main\n\ndefaults:\n  run:\n    working-directory: docs\n\njobs:\n  deploy:\n    name: Build Docusaurus to gh-pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 18\n          cache: npm\n          cache-dependency-path: docs/package-lock.json\n\n      - name: Install dependencies\n        run: npm ci\n      - name: Build website\n        run: npm run build\n\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: docs/build\n          user_name: github-actions[bot]\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\n")),(0,i.kt)("p",null,"Push the changes up to the remote repository, and verify that the action runs successfully at ",(0,i.kt)("inlineCode",{parentName:"p"},"https://github.com/<org-or-user>/<repo>/actions"),":"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"workflow-runs",src:n(7703).Z,width:"1017",height:"377"})),(0,i.kt)("h2",{id:"configure-github-pages"},"Configure GitHub Pages"),(0,i.kt)("p",null,"Once the workflow has successfully run, the repository needs to be configured to enable GitHub Pages."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to ",(0,i.kt)("inlineCode",{parentName:"p"},"https://github.com/<org-or-user>/<repo>/settings/pages"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Set ",(0,i.kt)("strong",{parentName:"p"},"Source")," to ",(0,i.kt)("em",{parentName:"p"},"Deploy from a branch"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Set ",(0,i.kt)("strong",{parentName:"p"},"Branch")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"gh-pages")," at ",(0,i.kt)("inlineCode",{parentName:"p"},"/(root)")," and click ",(0,i.kt)("strong",{parentName:"p"},"Save"),":"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"pages-config",src:n(9043).Z,width:"555",height:"244"})))),(0,i.kt)("p",null,"You should see the following in the GitHub Pages settings once the docs are deployed:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"pages-deployed",src:n(385).Z,width:"804",height:"186"})),(0,i.kt)("p",null,"Click ",(0,i.kt)("strong",{parentName:"p"},"Visit Site")," to see the hosted documentation:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"hosted-docs",src:n(5667).Z,width:"1342",height:"893"})))}d.isMDXComponent=!0},3807:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/actions-permissions-f60bc5f220fa3b7d3b520baa7b7a9c7f.png"},5667:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/hosted-docs-af6577fb445b03790a772bd6bc01b19e.png"},9043:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pages-config-f913951351152020ca46c75e34bb4c7d.png"},385:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pages-deployed-38f45d2215358f8b88a0552b248c6d9b.png"},7703:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/workflow-runs-05df9b0a6e9cd266bc5ec6f17dbe015d.png"}}]);